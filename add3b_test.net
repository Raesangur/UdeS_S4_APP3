* C:\Users\frede\OneDrive\Bureau\UdeS_S4_APP3\add3b_test.asc
XU1 o1 o2 o3 out Bin2Dec Vhigh={vv}
XU2 b N004 N005 N006 Dec2Bin Vhigh={vv}
XU3 a N001 N002 N003 Dec2Bin Vhigh={vv}
V1 vss 0 1.8
Va a 0 PULSE(0 {vv} 1000p 1p 1p 2000p 40000u 5)
Vb b 0 PULSE(0 {vv} 1000p 1p 1p 2000p 4000p 5)
Vsel sel 0 1.8
XX1 vss N001 N002 N003 N004 N005 N006 0 o1 o2 o3 cout 0 add3b

* block symbol definitions
.subckt add3b vdd a1 a2 a3 b1 b2 b3 vss o1 o2 o3 cout cin
XX1 a3 N003 vdd vss b3 xor params: XOR
XX2 N003 o3 vdd vss N005 xor params: XOR
XX3 N003 N008 vdd vss N005 nand params: NAND
XX4 a3 N011 vdd vss b3 nand params: NAND
XX6 N008 cout vdd vss N011 nand params: NAND
XX11 a1 N001 vdd vss b1 xor params: XOR
XX12 N001 o1 vdd vss cin xor params: XOR
XX13 N001 N006 vdd vss cin nand params: NAND
XX14 a1 N009 vdd vss b1 nand params: NAND
XX15 N006 N004 vdd vss N009 nand params: NAND
XX16 a2 N002 vdd vss b2 xor params: XOR
XX17 N002 o2 vdd vss N004 xor params: XOR
XX18 N002 N007 vdd vss N004 nand params: NAND
XX19 a2 N010 vdd vss b2 nand params: NAND
XX20 N007 N005 vdd vss N010 nand params: NAND
.ends add3b

.subckt xor in1 Q vdd vss in2
M1 vdd in1 N004 N002 PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M2 N007 in1_NOT vss N008 NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n*{wn}} ps={1080n*{wn}}
M3 N004 in2_NOT Q N004 PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M4 vdd in2 N003 N001 PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M5 Q in1 N007 N005 NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n*{wn}} ps={1080n*{wn}}
M6 Q in2_NOT N007 N006 NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n*{wn}} ps={1080n*{wn}}
M10 N003 in1_NOT Q N003 PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M11 N007 in2 vss N009 NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n*{wn}} ps={1080n*{wn}}
XX1 in1 in1_NOT vdd vss inv
XX2 in2 in2_NOT vdd vss inv
.lib BU_180nm.lib
.param ll=180n wn=180n wp=475n
.ends xor

.subckt nand in1 Q vdd vss in2
M2 N004 in2 vss N005 NMOS l={ll} w={wn*2} ad={450n*{wn}} as={450n*{wn}} pd={900n*{wn}} ps={1080n*{wn}}
M3 Q in1 N004 N003 NMOS l={ll} w={wn*2} ad={450n*{wn}} as={450n*{wn}} pd={900n*{wn}} ps={1080n*{wn}}
M4 vdd in2 Q N002 PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M5 vdd in1 Q N001 PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
.lib BU_180nm.lib
.param ll=180n wn=180n wp=475n
.ends nand

.subckt inv In _Q vdd vss
M1 _Q In vss vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M2 vdd In _Q vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
.lib BU_180nm.lib
.param ll=180n wn=180n wp=475n
.ends inv

.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\frede\OneDrive\Documents\LTspiceXVII\lib\cmp\standard.mos
.param vv=1.8 nnw=180n mp=1
.lib BU_180nm.lib
.op
.tran 0 10000p 0 10p
.meas tran t1 find time when v(a1)=vv*0.1 rise 1
.meas tran t2 find time when v(a1)=vv*0.9 rise 1
.meas tran t3 find time when v(o1)=vv*0.1 fall 1
.meas tran t4 find time when v(o1)=vv*0.9 fall 1
.meas tran transition_up param abs(t2-t1)
.meas tran transition_down param abs(t4-t3)
.meas tran ratio param upslope/downslope
.lib Bin2Dec.sub
.lib Dec2Bin.sub
.backanno
.end
